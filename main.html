<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MANGA System Design Master Plan</title>
    <style>
        :root {
            --primary: #2563eb;
            --bg: #f1f5f9;
            --surface: #ffffff;
            --text: #334155;
            --border: #e2e8f0;
            --success-bg: #dcfce7;
            --success-text: #166534;
            --link: #0284c7;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 40px 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--surface);
            border-radius: 16px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            background: #1e293b;
            color: white;
            padding: 2.5rem;
            text-align: center;
        }

        h1 { margin: 0; font-size: 2rem; letter-spacing: -0.5px; }
        p.subtitle { margin-top: 0.5rem; opacity: 0.8; font-size: 1.1rem; }

        /* Progress Bar */
        .progress-section {
            padding: 20px 30px;
            background: #f8fafc;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .progress-track {
            flex-grow: 1;
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .progress-stat {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.1rem;
            min-width: 60px;
            text-align: right;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            background: #f8fafc;
        }

        .tab-btn {
            flex: 1;
            padding: 1.2rem;
            border: none;
            background: none;
            cursor: pointer;
            font-weight: 600;
            color: #64748b;
            font-size: 1rem;
            transition: all 0.2s;
            border-bottom: 4px solid transparent;
        }

        .tab-btn:hover { background: #e2e8f0; color: var(--text); }
        .tab-btn.active {
            background: var(--surface);
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        /* Table */
        .tab-content { display: none; padding: 0; }
        .tab-content.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        table { width: 100%; border-collapse: collapse; }

        th, td {
            padding: 16px 24px;
            text-align: left;
            border-bottom: 1px solid var(--border);
            vertical-align: top;
        }

        th {
            background-color: #f1f5f9;
            font-weight: 700;
            color: #475569;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 0.05em;
            position: sticky;
            top: 0;
        }

        /* Styling for Done Rows */
        tr.done-row { background-color: var(--success-bg); }
        tr.done-row td { color: var(--success-text); }
        tr.done-row a { color: var(--success-text); text-decoration: underline; }

        /* Task Checkboxes */
        .task-list { list-style: none; padding: 0; margin: 0; }
        .task-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .task-item:last-child { margin-bottom: 0; }

        input[type="checkbox"] {
            margin-top: 5px;
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--primary);
            flex-shrink: 0;
        }
        
        input[type="checkbox"]:checked + span {
            text-decoration: line-through;
            opacity: 0.6;
        }

        /* Resources Links */
        .resource-link {
            display: inline-block;
            color: var(--link);
            text-decoration: none;
            background: #e0f2fe;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-bottom: 6px;
            font-weight: 600;
            transition: transform 0.1s;
        }
        .resource-link:hover {
            transform: translateY(-1px);
            text-decoration: underline;
        }

        /* Status Badge */
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: bold;
            background: #e2e8f0;
            color: #64748b;
        }
        .status-badge.complete {
            background: #22c55e;
            color: white;
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>MANGA System Design Grind</h1>
        <p class="subtitle">6-Month Comprehensive Preparation Plan</p>
    </header>

    <div class="progress-section">
        <span>Global Progress:</span>
        <div class="progress-track">
            <div class="progress-fill" id="globalProgress"></div>
        </div>
        <div class="progress-stat" id="globalProgressText">0%</div>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="openTab('phase1')">Phase 1: Fundamentals</button>
        <button class="tab-btn" onclick="openTab('phase2')">Phase 2: Components</button>
        <button class="tab-btn" onclick="openTab('phase3')">Phase 3: Architecture</button>
    </div>

    <div id="phase1" class="tab-content active">
        <table>
            <thead>
                <tr>
                    <th style="width: 8%">Wk</th>
                    <th style="width: 20%">Focus Area</th>
                    <th style="width: 25%">Resources (Click to Open)</th>
                    <th style="width: 37%">Detailed Tasks (Check when done)</th>
                    <th style="width: 10%; text-align: center;">Status</th>
                </tr>
            </thead>
            <tbody id="phase1-body"></tbody>
        </table>
    </div>

    <div id="phase2" class="tab-content">
        <table>
            <thead>
                <tr>
                    <th style="width: 8%">Wk</th>
                    <th style="width: 20%">Focus Area</th>
                    <th style="width: 25%">Resources (Click to Open)</th>
                    <th style="width: 37%">Detailed Tasks (Check when done)</th>
                    <th style="width: 10%; text-align: center;">Status</th>
                </tr>
            </thead>
            <tbody id="phase2-body"></tbody>
        </table>
    </div>

    <div id="phase3" class="tab-content">
        <table>
            <thead>
                <tr>
                    <th style="width: 8%">Wk</th>
                    <th style="width: 20%">Focus Area</th>
                    <th style="width: 25%">Resources (Click to Open)</th>
                    <th style="width: 37%">Detailed Tasks (Check when done)</th>
                    <th style="width: 10%; text-align: center;">Status</th>
                </tr>
            </thead>
            <tbody id="phase3-body"></tbody>
        </table>
    </div>
</div>

<script>
    // --- SEARCH HELPERS ---
    const ghRepo = "https://github.com/donnemartin/system-design-primer";
    const google = (q) => `https://www.google.com/search?q=${encodeURIComponent(q)}`;

    // --- DATA ---
    const data = {
        phase1: [
            { 
                w: "W1", focus: "Scalability Basics", 
                res: [
                    { t: "DDIA: Ch 1 (Reliability)", u: google("Designing Data Intensive Applications Chapter 1 summary") },
                    { t: "GitHub: Scalability", u: `${ghRepo}#performance-vs-scalability` }
                ],
                tasks: [
                    "Explain Vertical vs. Horizontal scaling to a non-tech person",
                    "Calculate latency: Memory vs. Disk vs. Network (Back of envelope)",
                    "Memorize 'Power of 2' data approximations"
                ] 
            },
            { 
                w: "W2", focus: "Load Balancing & Caching", 
                res: [
                    { t: "GitHub: Load Balancer", u: `${ghRepo}#load-balancer` },
                    { t: "GitHub: Caching", u: `${ghRepo}#caching` },
                    { t: "Paper: FB Memcached", u: google("Facebook Memcached paper pdf") }
                ],
                tasks: [
                    "Configure NGINX locally to balance 2 servers",
                    "Draw a diagram: Where do caches sit? (CDN, ISP, Local, App)",
                    "Explain LRU vs LFU eviction policies"
                ] 
            },
            { 
                w: "W3", focus: "Database Internals", 
                res: [
                    { t: "DDIA: Ch 3 (Storage)", u: google("DDIA Chapter 3 SSTables vs B-Trees") },
                    { t: "GitHub: RDBMS", u: `${ghRepo}#relational-database-management-system-rdbms` }
                ],
                tasks: [
                    "Explain SSTables vs B-Trees (LSM Trees)",
                    "Perform an ACID transaction in PostgreSQL manually",
                    "List 3 scenarios where NoSQL beats SQL"
                ] 
            },
            { 
                w: "W4", focus: "Replication & Sharding", 
                res: [
                    { t: "DDIA: Ch 5 (Replication)", u: google("DDIA Chapter 5 Replication summary") },
                    { t: "GitHub: Sharding", u: `${ghRepo}#sharding` }
                ],
                tasks: [
                    "Explain Leader-Follower vs Multi-Leader replication",
                    "Design a sharding key strategy for a User table",
                    "Explain what happens when a shard gets 'hot'"
                ] 
            },
            { 
                w: "W5", focus: "CAP & Consistency", 
                res: [
                    { t: "DDIA: Ch 7 & 9", u: google("DDIA Chapter 9 Consistency and Consensus") },
                    { t: "GitHub: CAP Theorem", u: `${ghRepo}#cap-theorem` }
                ],
                tasks: [
                    "Map MongoDB, Cassandra, and MySQL to the CAP triangle",
                    "Write pseudo-code for a race condition",
                    "Explain 'Eventual Consistency' vs 'Strong Consistency'"
                ] 
            },
            { 
                w: "W6", focus: "Communication Protocols", 
                res: [
                    { t: "GitHub: Communication", u: `${ghRepo}#communication` },
                    { t: "Docs: gRPC vs REST", u: google("gRPC vs REST vs GraphQL performance") }
                ],
                tasks: [
                    "Compare Long-Polling vs WebSockets vs SSE",
                    "Why are Protocol Buffers faster than JSON?",
                    "When would you use GraphQL over REST?"
                ] 
            },
            { 
                w: "W7", focus: "Asynchronous Processing", 
                res: [
                    { t: "DDIA: Ch 11 (Streams)", u: google("DDIA Chapter 11 Stream Processing") },
                    { t: "GitHub: Message Queues", u: `${ghRepo}#message-queues` }
                ],
                tasks: [
                    "Compare RabbitMQ (Push) vs Kafka (Pull)",
                    "Draw flow: User uploads image -> Queue -> Resize Worker",
                    "Explain 'Backpressure'"
                ] 
            },
            { 
                w: "W8", focus: "Phase 1 Review", 
                res: [
                    { t: "Your Personal Notes", u: "#" },
                    { t: "Practice: System Design", u: google("System Design Interview URL Shortener") }
                ],
                tasks: [
                    "TEST: Design a URL Shortener DB schema from scratch",
                    "Review all 'Trade-offs' notes",
                    "Clear any unchecked boxes from W1-W7"
                ] 
            }
        ],
        phase2: [
            { 
                w: "W9", focus: "Consistent Hashing & KV", 
                res: [
                    { t: "GitHub: Consistent Hashing", u: `${ghRepo}#consistent-hashing` },
                    { t: "Paper: Dynamo (Amazon)", u: google("Amazon Dynamo Key Value Store paper") }
                ],
                tasks: [
                    "Implement a Consistent Hashing ring in Python/Java",
                    "Explain how Virtual Nodes improve balance",
                    "Summarize 'Vector Clocks' for conflict resolution"
                ] 
            },
            { 
                w: "W10", focus: "ID Gen & Rate Limiters", 
                res: [
                    { t: "Video: Stripe Rate Limiters", u: google("Stripe Rate Limiters blog video") },
                    { t: "Blog: Snowflake ID", u: google("Twitter Snowflake ID generator explanation") }
                ],
                tasks: [
                    "Compare UUID vs Snowflake IDs (Int vs String)",
                    "Design a Rate Limiter using Redis (Lua scripts)",
                    "Explain Token Bucket vs Leaky Bucket algorithms"
                ] 
            },
            { 
                w: "W11", focus: "Search & Web Crawlers", 
                res: [
                    { t: "GitHub: Web Crawler", u: `${ghRepo}#design-a-web-crawler` },
                    { t: "Concept: Inverted Index", u: google("Inverted Index data structure explanation") }
                ],
                tasks: [
                    "Explain 'Politeness' in crawling",
                    "Design a Trie (Prefix Tree) for Autocomplete",
                    "How do Bloom Filters save DB lookups?"
                ] 
            },
            { 
                w: "W12", focus: "Distributed Caching", 
                res: [
                    { t: "GitHub: Caching", u: `${ghRepo}#caching` },
                    { t: "Paper: Scaling Memcache", u: google("Scaling Memcache at Facebook paper") }
                ],
                tasks: [
                    "Explain 'Thundering Herd' problem & solution",
                    "Design solution for 'Hot Keys' (Celebrity problem)",
                    "Compare Cache Aside vs Write-Through"
                ] 
            },
            { 
                w: "W13", focus: "Distributed File Systems", 
                res: [
                    { t: "Paper: GFS", u: google("Google File System paper pdf") },
                    { t: "Docs: AWS S3", u: google("AWS S3 architecture overview") }
                ],
                tasks: [
                    "Draw flow: Reading vs Writing a file in GFS",
                    "Compare Block Storage vs Object Storage",
                    "Why is HDFS not good for many small files?"
                ] 
            },
            { 
                w: "W14", focus: "Notification & Chat", 
                res: [
                    { t: "GitHub: Chat Service", u: `${ghRepo}#design-a-chat-application` },
                    { t: "Protocol: XMPP", u: google("XMPP vs WebSockets") }
                ],
                tasks: [
                    "Schema design: 1-on-1 vs Group Chat",
                    "Design 'User is Typing' feature efficiently",
                    "How to handle 'Offline' message delivery?"
                ] 
            },
            { 
                w: "W15", focus: "Consensus & Coordination", 
                res: [
                    { t: "DDIA: Ch 9 (Consensus)", u: google("DDIA Consensus Paxos Raft") },
                    { t: "Tool: ZooKeeper", u: google("Apache ZooKeeper use cases") }
                ],
                tasks: [
                    "Explain Split Brain scenario",
                    "Why is Leader Election necessary?",
                    "High-level explanation of Paxos or Raft"
                ] 
            },
            { 
                w: "W16", focus: "Phase 2 Review", 
                res: [
                    { t: "Practice: Combo", u: "#" },
                    { t: "Latency Numbers", u: google("Latency Numbers Every Programmer Should Know") }
                ],
                tasks: [
                    "TEST: Draw a system using Rate Limiter + ID Gen + Cache",
                    "Review 'Latency Numbers Every Programmer Should Know'",
                    "Clear unchecked boxes W9-W15"
                ] 
            }
        ],
        phase3: [
            { 
                w: "W17", focus: "Social Media (Twitter)", 
                res: [
                    { t: "GitHub: Design Twitter", u: `${ghRepo}#design-a-timeline` },
                    { t: "Concept: Fan-out", u: google("Fan-out on write vs Fan-out on read") }
                ],
                tasks: [
                    "Design 'Fan-out on Write' vs 'Fan-out on Read'",
                    "DB Schema for User, Tweet, Follow",
                    "Calculate storage for 500M daily tweets"
                ] 
            },
            { 
                w: "W18", focus: "Streaming (Netflix)", 
                res: [
                    { t: "Blog: Netflix Tech", u: google("Netflix High Scalability Blog") },
                    { t: "Concept: Transcoding", u: google("Video Transcoding architecture") }
                ],
                tasks: [
                    "Design upload path: Chunking -> Queue -> S3 -> CDN",
                    "How to handle viral traffic spikes?",
                    "Explain Adaptive Bitrate Streaming"
                ] 
            },
            { 
                w: "W19", focus: "Messenger (WhatsApp)", 
                res: [
                    { t: "GitHub: Design WhatsApp", u: `${ghRepo}#design-a-chat-application` },
                    { t: "Concept: E2E Encryption", u: google("End to end encryption implementation basics") }
                ],
                tasks: [
                    "Design 'Last Seen' heartbeat mechanism",
                    "Sync messages across Phone + Desktop",
                    "How do you store message history efficiently?"
                ] 
            },
            { 
                w: "W20", focus: "Ride Hailing (Uber)", 
                res: [
                    { t: "Blog: Uber Tech", u: google("Uber Marketplace technology stack") },
                    { t: "Concept: Quadtrees", u: google("Quadtree vs Geohash for location") }
                ],
                tasks: [
                    "How to match rider to driver in < 2 seconds?",
                    "Handle 'Surge' pricing concurrency",
                    "Store/Query driver locations efficiently (Geospatial)"
                ] 
            },
            { 
                w: "W21", focus: "E-Commerce (Amazon)", 
                res: [
                    { t: "Concept: Idempotency", u: google("Idempotency in distributed systems") },
                    { t: "Concept: Dist. Tx", u: google("Two Phase Commit vs Saga Pattern") }
                ],
                tasks: [
                    "Design Checkout flow (Inventory Lock)",
                    "Handle payment failures elegantly",
                    "Ensure 'Exactly Once' processing for orders"
                ] 
            },
            { 
                w: "W22", focus: "Mock Interviews (Peer)", 
                res: [{ t: "Platform: Pramp", u: "https://www.pramp.com" }],
                tasks: [
                    "Action: 3 Peer Mock Interviews",
                    "Focus: Timing (5m Reqs, 10m High Lvl, 20m Deep Dive)",
                    "Get feedback on your communication style"
                ] 
            },
            { 
                w: "W23", focus: "Mock Interviews (Hard)", 
                res: [{ t: "Constraint Practice", u: "#" }],
                tasks: [
                    "Action: 3 Mocks with self-imposed constraints",
                    "Example: 'Design Twitter but for internal enterprise usage'",
                    "Focus: Requirements gathering"
                ] 
            },
            { 
                w: "W24", focus: "Final Review", 
                res: [{ t: "Personal: Resume", u: "#" }],
                tasks: [
                    "Prepare 3 'War Stories' from your own resume",
                    "Memorize standard latency numbers",
                    "Rest & Confidence building"
                ] 
            }
        ]
    };

    // --- LOGIC ---

    function init() {
        renderPhase('phase1', data.phase1);
        renderPhase('phase2', data.phase2);
        renderPhase('phase3', data.phase3);
        updateGlobalProgress();
    }

    function renderPhase(phaseId, weekData) {
        const tbody = document.getElementById(phaseId + '-body');
        
        weekData.forEach((week, wIndex) => {
            const tr = document.createElement('tr');
            tr.id = `${phaseId}-row-${wIndex}`;

            // Generate Resource Links
            const resHtml = week.res.map(r => 
                `<a href="${r.u}" target="_blank" class="resource-link">${r.t} â†—</a>`
            ).join('<br>');

            // Generate Tasks with Checkboxes
            let tasksHtml = `<ul class="task-list">`;
            let completedTasks = 0;

            week.tasks.forEach((task, tIndex) => {
                const taskId = `${phaseId}-w${wIndex}-t${tIndex}`;
                const isChecked = localStorage.getItem(taskId) === 'true';
                if(isChecked) completedTasks++;

                tasksHtml += `
                    <li class="task-item">
                        <input type="checkbox" id="${taskId}" 
                            ${isChecked ? 'checked' : ''} 
                            onchange="toggleTask('${phaseId}', ${wIndex}, ${week.tasks.length})">
                        <span>${task}</span>
                    </li>`;
            });
            tasksHtml += `</ul>`;

            // Status Badge Logic
            const isWeekDone = completedTasks === week.tasks.length;
            const badgeClass = isWeekDone ? 'status-badge complete' : 'status-badge';
            const badgeText = isWeekDone ? 'DONE' : `${completedTasks} / ${week.tasks.length}`;
            
            if(isWeekDone) tr.classList.add('done-row');

            tr.innerHTML = `
                <td>${week.w}</td>
                <td><strong>${week.focus}</strong></td>
                <td>${resHtml}</td>
                <td>${tasksHtml}</td>
                <td style="text-align: center;">
                    <span class="${badgeClass}" id="${phaseId}-badge-${wIndex}">${badgeText}</span>
                </td>
            `;
            tbody.appendChild(tr);
        });
    }

    function toggleTask(phaseId, weekIndex, totalTasks) {
        // 1. Save specific task state
        const eventSource = event.target;
        localStorage.setItem(eventSource.id, eventSource.checked);

        // 2. Calculate new status for this week
        let completedCount = 0;
        for(let i=0; i<totalTasks; i++) {
            const taskId = `${phaseId}-w${weekIndex}-t${i}`;
            if(localStorage.getItem(taskId) === 'true') completedCount++;
        }

        // 3. Update Badge and Row Style
        const row = document.getElementById(`${phaseId}-row-${weekIndex}`);
        const badge = document.getElementById(`${phaseId}-badge-${weekIndex}`);
        const isDone = completedCount === totalTasks;

        if (isDone) {
            row.classList.add('done-row');
            badge.className = 'status-badge complete';
            badge.innerText = 'DONE';
        } else {
            row.classList.remove('done-row');
            badge.className = 'status-badge';
            badge.innerText = `${completedCount} / ${totalTasks}`;
        }

        // 4. Update Global Progress
        updateGlobalProgress();
    }

    function updateGlobalProgress() {
        let totalTasks = 0;
        let totalCompleted = 0;

        // Iterate through all data to count
        ['phase1', 'phase2', 'phase3'].forEach(p => {
            data[p].forEach((week, wIndex) => {
                week.tasks.forEach((_, tIndex) => {
                    totalTasks++;
                    if(localStorage.getItem(`${p}-w${wIndex}-t${tIndex}`) === 'true') {
                        totalCompleted++;
                    }
                });
            });
        });

        const pct = totalTasks === 0 ? 0 : Math.round((totalCompleted / totalTasks) * 100);
        document.getElementById('globalProgress').style.width = pct + '%';
        document.getElementById('globalProgressText').innerText = pct + '%';
    }

    function openTab(tabName) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        document.getElementById(tabName).classList.add('active');
        
        // Update button styles
        const btns = document.querySelectorAll('.tab-btn');
        if(tabName === 'phase1') btns[0].classList.add('active');
        if(tabName === 'phase2') btns[1].classList.add('active');
        if(tabName === 'phase3') btns[2].classList.add('active');
    }

    // Start
    init();

</script>

</body>
</html>
